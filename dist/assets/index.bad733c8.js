var Ee=Object.defineProperty;var fe=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var ge=(a,c,i)=>c in a?Ee(a,c,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[c]=i,G=(a,c)=>{for(var i in c||(c={}))Be.call(c,i)&&ge(a,i,c[i]);if(fe)for(var i of fe(c))ke.call(c,i)&&ge(a,i,c[i]);return a};import{a as R,T as F,I as W,P as H,r as s,u as K,j as t,b as e,C as $,F as J,d as I,c as de,e as b,D as Se,f as M,K as Ae,g as De,h as $e,B as ee,M as xe,i as Te,k as Ie,N as Re,l as ye,m as Me,n as We,o as se,p as Pe,q as Ye,R as je,s as ze,t as Le,v as Ue,w as qe}from"./vendor.7668394c.js";const Oe=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const _ of n.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&u(_)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}};Oe();R.defaults.baseURL="http://47.94.199.134:7001";R.defaults.withCredentials=!1;R.defaults.headers["X-Requested-With"]="XMLHttpRequest";R.defaults.headers.Authorization=`${localStorage.getItem("token")||null}`;R.defaults.headers.post["Content-Type"]="application/json";R.interceptors.response.use(a=>typeof a.data!="object"?(F.show("\u670D\u52A1\u7AEF\u5F02\u5E38\uFF01"),Promise.reject(a)):a.data.code!=200?(a.data.msg&&F.show(a.data.msg),a.data.code==401&&(window.location.href="/login"),Promise.reject(a.data)):a.data);const ve="http://47.94.199.134:7001",q=R.get,O=R.post,ne={1:{icon:"canyin"},2:{icon:"fushi"},3:{icon:"jiaotong"},4:{icon:"riyong"},5:{icon:"gouwu"},6:{icon:"xuexi"},7:{icon:"yiliao"},8:{icon:"lvxing"},9:{icon:"qita"},10:{icon:"gongzi"},11:{icon:"zhuanzhang"},12:{icon:"licai"},13:{icon:"tuikuang"},14:{icon:"qita"}},te={normal:0,pull:1,drop:2,loading:3,success:4,failure:5},pe={normal:0,abort:1,loading:2,success:3,failure:4,complete:5},Fe=a=>(a&&a.startsWith("http")||(a=`${ve}${a}`),a);var E=W.createFromIconfont("//at.alicdn.com/t/font_2236655_w1mpqp7n1ni.js");const He="_item_mkxeh_1",Ke="_header-date_mkxeh_7",Xe="_date_mkxeh_18",Ve="_money_mkxeh_22",Qe="_item-icon_mkxeh_37";var X={item:He,headerDate:Ke,date:Xe,money:Ve,itemIcon:Qe};const be=({bill:a})=>{const[c,i]=s.exports.useState(0),[u,o]=s.exports.useState(0),n=K();s.exports.useEffect(()=>{const l=a.bills.filter(m=>m.type==2).reduce((m,v)=>(m+=Number(v.amount),m),0);i(l);const f=a.bills.filter(m=>m.type==1).reduce((m,v)=>(m+=Number(v.amount),m),0);o(f)},[a.bills]);const _=l=>{n(`/detail?id=${l.id}`)};return t("div",{className:X.item,children:[t("div",{className:X.headerDate,children:[e("div",{className:X.date,children:a.date}),t("div",{className:X.money,children:[t("span",{children:[e("img",{src:"//s.yezgea02.com/1615953405599/zhi%402x.png",alt:"\u652F"}),t("span",{children:["\xA5",u.toFixed(2)]})]}),t("span",{children:[e("img",{src:"//s.yezgea02.com/1615953405599/shou%402x.png",alt:"\u6536"}),t("span",{children:["\xA5",c.toFixed(2)]})]})]})]}),a&&a.bills.map(l=>e($,{className:X.bill,onClick:()=>_(l),title:t(J,{children:[e(E,{className:X.itemIcon,type:l.label_id?ne[l.label_id].icon:1}),e("span",{children:l.name})]}),description:e("span",{style:{color:l.type==2?"red":"#39be77"},children:`${l.type==1?"-":"+"}${l.amount}`}),help:t("div",{children:[I(Number(l.date)).format("HH:mm")," ",l.remarks?`| ${l.remarks}`:""]})},l.id))]})};be.propTypes={bill:H.object};const Ze="_popup-type_xuces_1",Ge="_header_xuces_7",Je="_cross_xuces_20",et="_content_xuces_28",tt="_all_xuces_32",at="_title_xuces_39",st="_expense-wrap_xuces_44",nt="_income-wrap_xuces_45",ot="_active_xuces_60";var A={popupType:Ze,header:Ge,cross:Je,content:et,all:tt,title:at,expenseWrap:st,incomeWrap:nt,active:ot};const we=s.exports.forwardRef(({onSelect:a},c)=>{const[i,u]=s.exports.useState(!1),[o,n]=s.exports.useState("all"),[_,l]=s.exports.useState([]),[f,m]=s.exports.useState([]);s.exports.useEffect(()=>{(async()=>{const{data:{list:d}}=await q("/api/type/list");l(d.filter(y=>y.type==1)),m(d.filter(y=>y.type==2))})()},[]),c&&(c.current={show:()=>{u(!0)},close:()=>{u(!1)}});const v=d=>{n(d.id),u(!1),a(d)};return e(de,{visible:i,direction:"bottom",onMaskClick:()=>u(!1),destroy:!1,mountContainer:()=>document.body,children:t("div",{className:A.popupType,children:[t("div",{className:A.header,children:["\u8BF7\u9009\u62E9\u7C7B\u578B",e(W,{type:"wrong",className:A.cross,onClick:()=>u(!1)})]}),t("div",{className:A.content,children:[e("div",{onClick:()=>v({id:"all"}),className:b({[A.all]:!0,[A.active]:o=="all"}),children:"\u5168\u90E8\u7C7B\u578B"}),e("div",{className:A.title,children:"\u652F\u51FA"}),e("div",{className:A.expenseWrap,children:_.map((d,y)=>e("p",{onClick:()=>v(d),className:b({[A.active]:o==d.id}),children:d.name},y))}),e("div",{className:A.title,children:"\u6536\u5165"}),e("div",{className:A.incomeWrap,children:f.map((d,y)=>e("p",{onClick:()=>v(d),className:b({[A.active]:o==d.id}),children:d.name},y))})]})]})})});we.propTypes={onSelect:H.func};const oe=s.exports.forwardRef(({onSelect:a,mode:c="datetime"},i)=>{const[u,o]=s.exports.useState(!1),[n,_]=s.exports.useState(new Date),l=f=>{_(f),o(!1),c=="month"?a(I(f).format("YYYY-MM")):c=="date"?a(I(f).format("YYYY-MM-DD")):c=="datetime"&&a(I(f).format("YYYY-MM-DD HH:mm"))};return i&&(i.current={show:()=>{o(!0)},close:()=>{o(!1)}}),e(de,{visible:u,direction:"bottom",onMaskClick:()=>o(!1),destroy:!1,mountContainer:()=>document.body,children:e("div",{children:e(Se,{visible:u,value:n,mode:c,onOk:l,onCancel:()=>o(!1)})})})});oe.propTypes={mode:H.string,onSelect:H.func};const ct="_add-wrap_11omu_1",rt="_header_11omu_7",it="_close_11omu_10",ut="_filter_11omu_15",lt="_type_11omu_21",dt="_expense_11omu_30",pt="_active_11omu_33",mt="_income_11omu_38",ht="_time_11omu_43",_t="_arrow_11omu_52",ft="_money_11omu_56",gt="_sufix_11omu_61",xt="_amount_11omu_66",yt="_type-warp_11omu_70",vt="_type-body_11omu_79",Ft="_type-item_11omu_83",bt="_iconfont-wrap_11omu_90",wt="_iconfont_11omu_90",Nt="_remark_11omu_116";var g={addWrap:ct,header:rt,close:it,filter:ut,type:lt,expense:dt,active:pt,income:mt,time:ht,arrow:_t,money:ft,sufix:gt,amount:xt,typeWarp:yt,typeBody:vt,typeItem:Ft,iconfontWrap:bt,iconfont:wt,remark:Nt};const Ne=s.exports.forwardRef(({detail:a={},onReload:c},i)=>{const[u,o]=s.exports.useState(!1),[n,_]=s.exports.useState("expense"),[l,f]=s.exports.useState({}),[m,v]=s.exports.useState([]),[d,y]=s.exports.useState([]),N=s.exports.useRef(),[S,x]=s.exports.useState(""),[Q,Y]=s.exports.useState(!1),[j,z]=s.exports.useState(new Date),[w,h]=s.exports.useState(""),C=a&&a.id;i&&(i.current={show:()=>{o(!0)},close:()=>{o(!1)}}),s.exports.useEffect(()=>{a.id&&(_(a.type==1?"expense":"income"),f({id:a.label_id,name:a.name}),x(a.remarks),h(a.amount),z(I(Number(a.date))))},[a]),s.exports.useEffect(async()=>{const{data:{list:r}}=await q("/api/type/list"),Z=r.filter(le=>le.type==1),ue=r.filter(le=>le.type==2);v(Z),y(ue),C||f(Z[0])},[]);const L=r=>{_(r),r=="expense"?f(m[0]):f(d[0])},D=()=>{N.current&&N.current.show()},U=r=>{z(r)},ce=r=>{f(r)},re=r=>{if(r=String(r),r!="close"){if(r=="delete"){let ue=String(w).slice(0,w.length-1);h(ue);return}if(r=="ok"){ie();return}r=="."&&String(w).includes(".")||r!="."&&String(w).includes(".")&&String(w)&&String(w).split(".")[1].length>=2||h(w+r)}},ie=async()=>{if(!w){F.show("\u8BF7\u8F93\u5165\u5177\u4F53\u91D1\u989D");return}const r={amount:Number(w).toFixed(2),label_id:l.id,date:I(j).unix()*1e3,remarks:S||""};C?(r.id=C,await O("/api/bill/update",r),F.show("\u4FEE\u6539\u6210\u529F")):(await O("/api/bill/add",r),h(""),_("expense"),f(m[0]),z(new Date),x(""),F.show("\u6DFB\u52A0\u6210\u529F")),o(!1),c&&c()};return e(de,{visible:u,direction:"bottom",onMaskClick:()=>o(!1),destroy:!1,mountContainer:()=>document.body,children:t("div",{className:g.addWrap,children:[e("header",{className:g.header,children:e("span",{className:g.close,onClick:()=>o(!1),children:e(W,{type:"wrong"})})}),t("div",{className:g.filter,children:[t("div",{className:g.type,children:[e("span",{onClick:()=>L("expense"),className:b({[g.expense]:!0,[g.active]:n=="expense"}),children:"\u652F\u51FA"}),e("span",{onClick:()=>L("income"),className:b({[g.income]:!0,[g.active]:n=="income"}),children:"\u6536\u5165"})]}),t("div",{className:g.time,onClick:D,children:[I(j).format("MM-DD"),e(W,{className:g.arrow,type:"arrow-bottom"})]})]}),t("div",{className:g.money,children:[e("span",{className:g.sufix,children:"\xA5"}),e("span",{className:b(g.amount,g.animation),children:w})]}),e("div",{className:g.typeWarp,children:e("div",{className:g.typeBody,children:(n=="expense"?m:d).map(r=>t("div",{onClick:()=>ce(r),className:g.typeItem,children:[e("span",{className:b({[g.iconfontWrap]:!0,[g.expense]:n=="expense",[g.income]:n=="income",[g.active]:l.id==r.id}),children:e(E,{className:g.iconfont,type:ne[r.id].icon})}),e("span",{children:r.name})]},r.id))})}),e("div",{className:g.remark,children:Q?e(M,{autoHeight:!0,showLength:!0,maxLength:50,type:"text",rows:3,value:S,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8\u4FE1\u606F",onChange:r=>x(r),onBlur:()=>Y(!1)}):e("span",{onClick:()=>Y(!0),children:S||"\u6DFB\u52A0\u5907\u6CE8"})}),e(Ae,{type:"price",onKeyClick:r=>re(r)}),e(oe,{ref:N,onSelect:U})]})})}),Ct="_home_6bcn7_1",Et="_header_6bcn7_7",Bt="_data-wrap_6bcn7_22",kt="_type-wrap_6bcn7_38",St="_left_6bcn7_50",At="_arrow_6bcn7_53",Dt="_content-wrap_6bcn7_57",$t="_add_6bcn7_67";var B={home:Ct,header:Et,dataWrap:Bt,typeWrap:kt,left:St,arrow:At,contentWrap:Dt,add:$t};const Tt=()=>{const[a,c]=s.exports.useState(I().format("YYYY-MM")),[i,u]=s.exports.useState([]),[o,n]=s.exports.useState(1),[_,l]=s.exports.useState(0),[f,m]=s.exports.useState(te.normal),[v,d]=s.exports.useState(pe.normal),y=s.exports.useRef(),N=s.exports.useRef(),[S,x]=s.exports.useState({}),[Q,Y]=s.exports.useState(0),[j,z]=s.exports.useState(0),w=s.exports.useRef();s.exports.useEffect(()=>{h()},[o,S,a]);const h=async()=>{const{data:r}=await q(`/api/bill/list?page=${o}&page_size=5&date=${a}&label_id=${S.id||"all"}`);o==1?u(r.list):u(i.concat(r.list)),Y(r.totalExpense.toFixed(2)),z(r.totalIncome.toFixed(2)),l(r.totalPage),d(pe.success),m(te.success)},C=()=>{m(te.loading),o!=1?n(1):h()},L=()=>{o<_&&(d(pe.loading),n(o+1))},D=()=>{y.current&&y.current.show()},U=r=>{r!=S&&m(te.loading),n(1),x(r)},ce=()=>{N.current&&N.current.show()},re=r=>{r!=a&&m(te.loading),n(1),c(r)},ie=()=>{w.current&&w.current.show()};return t("div",{className:B.home,children:[t("div",{className:B.header,children:[t("div",{className:B.dataWrap,children:[t("span",{className:B.expense,children:["\u603B\u652F\u51FA\uFF1A",t("b",{children:["\xA5 ",Q]})]}),t("span",{className:B.income,children:["\u603B\u6536\u5165\uFF1A",t("b",{children:["\xA5 ",j]})]})]}),t("div",{className:B.typeWrap,children:[e("div",{className:B.left,onClick:D,children:t("span",{className:B.title,children:[S.name||"\u5168\u90E8\u7C7B\u578B"," ",e(W,{className:B.arrow,type:"arrow-bottom"})]})}),e("div",{className:B.right,children:t("span",{className:B.time,onClick:ce,children:[a,e(W,{className:B.arrow,type:"arrow-bottom"})]})})]})]}),e("div",{className:B.contentWrap,children:i.length?e(De,{animationDuration:200,stayTime:400,refresh:{state:f,handler:C},load:{state:v,distance:200,handler:L},children:i.map((r,Z)=>e(be,{bill:r},Z))}):null}),e(we,{ref:y,onSelect:U}),e(oe,{ref:N,mode:"month",onSelect:re}),e("div",{className:B.add,onClick:ie,children:e(E,{type:"tianjia"})}),e(Ne,{ref:w,onReload:C})]})},It="_data_1h2fb_1",Rt="_total_1h2fb_5",Mt="_time_1h2fb_13",Wt="_date_1h2fb_35",Pt="_title_1h2fb_39",Yt="_expense_1h2fb_45",jt="_income_1h2fb_51",zt="_structure_1h2fb_55",Lt="_head_1h2fb_60",Ut="_tab_1h2fb_70",qt="_active_1h2fb_80",Ot="_content_1h2fb_88",Ht="_item_1h2fb_88",Kt="_left_1h2fb_93",Xt="_type_1h2fb_100",Vt="_name_1h2fb_115",Qt="_right_1h2fb_124",Zt="_percent_1h2fb_129",Gt="_momey_1h2fb_135",Jt="_proportion_1h2fb_138";var p={data:It,total:Rt,time:Mt,date:Wt,title:Pt,expense:Yt,income:jt,structure:zt,head:Lt,tab:Ut,active:qt,content:Ot,item:Ht,left:Kt,type:Xt,name:Vt,right:Qt,percent:Zt,momey:Gt,proportion:Jt};let me=null;const ea=()=>{const a=s.exports.useRef(),[c,i]=s.exports.useState(I().format("YYYY-MM")),[u,o]=s.exports.useState("expense"),[n,_]=s.exports.useState(0),[l,f]=s.exports.useState(0),[m,v]=s.exports.useState([]),[d,y]=s.exports.useState([]),[N,S]=s.exports.useState("expense");s.exports.useEffect(()=>(Q(),()=>{me.dispose()}),[c]);const x=h=>{window.echarts&&(me=echarts.init(document.getElementById("proportion")),me.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{data:h.map(C=>C.name)},series:[{name:"\u652F\u51FA",type:"pie",radius:"55%",data:h.map(C=>({value:C.number,name:C.name})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}))},Q=async()=>{const{data:h}=await q(`/api/bill/data?date=${c}`);_(h.total_expense),f(h.total_income);const C=h.total_data.filter(D=>D.type==1).sort((D,U)=>U.number-D.number),L=h.total_data.filter(D=>D.type==2).sort((D,U)=>U.number-D.number);v(C),y(L),x(N=="expense"?C:L)},Y=h=>{o(h)},j=h=>{S(h),x(h=="expense"?m:d)},z=()=>{a.current&&a.current.show()},w=h=>{i(h)};return t("div",{className:p.data,children:[t("div",{className:p.total,children:[t("div",{className:p.time,onClick:z,children:[e("span",{children:c}),e(W,{className:p.date,type:"date"})]}),e("div",{className:p.title,children:"\u5171\u652F\u51FA"}),t("div",{className:p.expense,children:["\xA5",n]}),t("div",{className:p.income,children:["\u5171\u6536\u5165\xA5",l]})]}),t("div",{className:p.structure,children:[t("div",{className:p.head,children:[e("span",{className:p.title,children:"\u6536\u652F\u6784\u6210"}),t("div",{className:p.tab,children:[e("span",{onClick:()=>Y("expense"),className:b({[p.expense]:!0,[p.active]:u=="expense"}),children:"\u652F\u51FA"}),e("span",{onClick:()=>Y("income"),className:b({[p.income]:!0,[p.active]:u=="income"}),children:"\u6536\u5165"})]})]}),e("div",{className:p.content,children:(u=="expense"?m:d).map(h=>t("div",{className:p.item,children:[t("div",{className:p.left,children:[t("div",{className:p.type,children:[e("span",{className:b({[p.expense]:u=="expense",[p.income]:u=="income"}),children:e(E,{type:h.label_id?ne[h.label_id].icon:1})}),e("span",{className:p.name,children:h.type_name})]}),t("div",{className:p.progress,children:["\xA5",Number(h.number).toFixed(2)||0]})]}),e("div",{className:p.right,children:e("div",{className:p.percent,children:e($e,{shape:"line",percent:Number(h.number/Number(u=="expense"?n:l)*100).toFixed(2),theme:"primary"})})})]},h.label_id))}),t("div",{className:p.proportion,children:[t("div",{className:p.head,children:[e("span",{className:p.title,children:"\u6536\u652F\u6784\u6210"}),t("div",{className:p.tab,children:[e("span",{onClick:()=>j("expense"),className:b({[p.expense]:!0,[p.active]:N=="expense"}),children:"\u652F\u51FA"}),e("span",{onClick:()=>j("income"),className:b({[p.income]:!0,[p.active]:N=="income"}),children:"\u6536\u5165"})]})]}),e("div",{id:"proportion"})]})]}),e(oe,{ref:a,mode:"month",onSelect:w})]})},ta="_user_1d4b2_1",aa="_head_1d4b2_5",sa="_info_1d4b2_14",na="_content_1d4b2_33",oa="_logout_1d4b2_43";var V={user:ta,head:aa,info:sa,content:na,logout:oa};const ca=()=>{const[a,c]=s.exports.useState({}),[i,u]=s.exports.useState(""),o=K();s.exports.useEffect(()=>{n()},[]);const n=async()=>{const{data:l}=await q("/api/user/get_userinfo");c(l),u(l.avatar)},_=()=>{xe.confirm({title:"\u9000\u51FA",content:"\u786E\u8BA4\u9000\u51FA\uFF1F",onOk:async()=>{localStorage.removeItem("token"),o("/login")}})};return t("div",{className:V.user,children:[t("div",{className:V.head,children:[t("div",{className:V.info,children:[t("span",{children:["\u6635\u79F0\uFF1A",a.username||"--"]}),t("span",{children:[e("img",{style:{width:30,height:30,verticalAlign:"-10px"},src:"//s.yezgea02.com/1615973630132/geqian.png",alt:""}),e("b",{children:a.signature||"\u6682\u65E0\u4E2A\u7B7E"})]})]}),e("img",{className:V.avatar,style:{width:60,height:60,borderRadius:8},src:a.avatar||"",alt:""})]}),t("div",{className:V.content,children:[e($,{hasArrow:!0,title:"\u7528\u6237\u4FE1\u606F\u4FEE\u6539",onClick:()=>o("/userinfo"),icon:e("img",{style:{width:20,verticalAlign:"-7px"},src:"//s.yezgea02.com/1615974766264/gxqm.png",alt:""})}),e($,{hasArrow:!0,title:"\u91CD\u7F6E\u5BC6\u7801",onClick:()=>o("/account"),icon:e("img",{style:{width:20,verticalAlign:"-7px"},src:"//s.yezgea02.com/1615974766264/zhaq.png",alt:""})}),e($,{hasArrow:!0,title:"\u5173\u4E8E",onClick:()=>o("/about"),icon:e("img",{style:{width:20,verticalAlign:"-7px"},src:"//s.yezgea02.com/1615975178434/lianxi.png",alt:""})})]}),e(ee,{className:V.logout,block:!0,theme:"danger",onClick:_,children:"\u9000\u51FA\u767B\u5F55"})]})},ra="_auth_1o0xf_1",ia="_head_1o0xf_5",ua="_tab_1o0xf_15",la="_avtive_1o0xf_24",da="_form_1o0xf_29",pa="_operation_1o0xf_38",ma="_agree_1o0xf_41";var P={auth:ra,head:ia,tab:ua,avtive:la,form:da,operation:pa,agree:ma};const ha=()=>{const a=s.exports.useRef(),[c,i]=s.exports.useState("login"),[u,o]=s.exports.useState(""),[n,_]=s.exports.useState(""),[l,f]=s.exports.useState(""),[m,v]=s.exports.useState(""),[d,y]=s.exports.useState(""),N=async()=>{if(!u){F.show("\u8BF7\u8F93\u5165\u8D26\u53F7");return}if(!n){F.show("\u8BF7\u8F93\u5165\u5BC6\u7801");return}try{if(c=="login"){const{data:x}=await O("/api/user/login",{user_name:u,password:n});console.log("data",x),localStorage.setItem("token",x.token),window.location.href="/"}else{if(n!==l){F.show("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4");return}if(!m){F.show("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801");return}if(m!=d){console.log(m),console.log(d),F.show("\u9A8C\u8BC1\u7801\u9519\u8BEF");return}if(!document.getElementById("agreement").checked){F.show("\u8BF7\u540C\u610F\u6761\u6B3E");return}const{data:x}=await O("/api/user/register",{user_name:u,password:n});F.show("\u6CE8\u518C\u6210\u529F"),i("login")}}catch{F.show("\u7CFB\u7EDF\u9519\u8BEF")}};s.exports.useEffect(()=>{document.title=c=="login"?"\u767B\u5F55":"\u6CE8\u518C"},[c]);const S=s.exports.useCallback(x=>{y(x)},[]);return t("div",{className:P.auth,children:[e("div",{className:P.head}),t("div",{className:P.tab,children:[e("span",{className:b({[P.active]:c=="login"}),onClick:()=>i("login"),children:"\u767B\u5F55"}),e("span",{className:b({[P.active]:c=="register"}),onClick:()=>i("register"),children:"\u6CE8\u518C"})]}),t("div",{className:P.form,children:[e($,{icon:e(E,{type:"zhanghao"}),children:e(M,{clearable:!0,type:"text",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",onChange:x=>o(x)})}),e($,{icon:e(E,{type:"mima"}),children:e(M,{clearable:!0,type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",onChange:x=>_(x)})}),c=="register"?e($,{icon:e(E,{type:"mima"}),children:e(M,{clearable:!0,type:"password",placeholder:"\u8BF7\u91CD\u65B0\u8F93\u5165\u5BC6\u7801",onChange:x=>f(x)})}):null,c=="register"?t($,{icon:e(E,{type:"mima"}),children:[e(M,{clearable:!0,type:"text",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",onChange:x=>v(x)}),e(Te,{ref:a,charNum:4,onChange:S})]}):null]}),t("div",{className:P.operation,children:[c=="register"?t("div",{className:P.agree,children:[e(Ie,{id:"agreement"}),t("label",{className:"text-light",children:["\u9605\u8BFB\u5E76\u540C\u610F",e("a",{children:"\u300A\u6761\u6B3E\u300B"})]})]}):null,e(ee,{onClick:N,block:!0,theme:"primary",children:c=="login"?"\u767B\u5F55":"\u6CE8\u518C"})]})]})},_a="_header-warp_12wcp_1",fa="_block_12wcp_4",ga="_header_12wcp_1",xa="_more_12wcp_21";var he={headerWarp:_a,block:fa,header:ga,more:xa};const ae=({title:a=""})=>{const c=K();return e("div",{className:he.headerWarp,children:e("div",{className:he.block,children:e(Re,{className:he.header,left:e(W,{type:"arrow-left",theme:"primary",onClick:()=>c(-1)}),title:a})})})};ae.propTypes={title:H.string};const ya="_detail_1wagh_1",va="_card_1wagh_8",Fa="_type_1wagh_16",ba="_expense_1wagh_29",wa="_income_1wagh_32",Na="_iconfont_1wagh_35",Ca="_amount_1wagh_38",Ea="_info_1wagh_43",Ba="_time_1wagh_48",ka="_remark_1wagh_61",Sa="_operation_1wagh_75",Aa="_van-icon_1wagh_82";var k={detail:ya,card:va,type:Fa,expense:ba,income:wa,iconfont:Na,amount:Ca,info:Ea,time:Ba,remark:ka,operation:Sa,vanIcon:Aa};const Da=()=>{const i=ye().search.replace(/[^0-9]/ig,""),u=K(),o=s.exports.useRef(),[n,_]=s.exports.useState({});s.exports.useEffect(()=>{l()},[]);const l=async()=>{const{data:v}=await q(`/api/bill/detail?id=${i}`),d=G({},v)["0"];_(d)},f=()=>{xe.confirm({title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u8D26\u5355\uFF1F",onOk:async()=>{await O("/api/bill/delete",{id:i}),F.show("\u5220\u9664\u6210\u529F"),u("/")}})},m=()=>{o.current&&o.current.show()};return t("div",{className:k.detail,children:[e(ae,{title:"\u8D26\u5355\u8BE6\u60C5"}),t("div",{className:k.card,children:[t("div",{className:k.type,children:[e("span",{className:b({[k.expense]:n.type==1,[k.income]:n.type==2}),children:e(E,{className:k.iconfont,type:n.label_id?ne[n.label_id].icon:1})}),e("span",{children:n.name||""})]}),n.type==1?t("div",{className:b(k.amount,k.expense),children:["-",n.amount]}):t("div",{className:b(k.amount,k.income),children:["+",n.amount]}),t("div",{className:k.info,children:[t("div",{className:k.time,children:[e("span",{children:"\u8BB0\u5F55\u65F6\u95F4"}),e("span",{children:I(Number(n.date)).format("YYYY-MM-DD HH:mm")})]}),t("div",{className:k.remark,children:[e("span",{children:"\u5907\u6CE8"}),e("span",{children:n.remarks||""})]})]}),t("div",{className:k.operation,children:[t("span",{onClick:f,children:[e(E,{type:"shanchu"}),"\u5220\u9664"]}),t("span",{onClick:m,children:[e(E,{type:"tianjia"}),"\u7F16\u8F91"]})]})]}),e(Ne,{ref:o,detail:n,onReload:l})]})},$a="_userinfo_1ieid_1",Ta="_item_1ieid_8",Ia="_title_1ieid_12",Ra="_avatar_1ieid_17",Ma="_avatar-url_1ieid_21",Wa="_desc_1ieid_27",Pa="_upload_1ieid_33",Ya="_signature_1ieid_36";var T={userinfo:$a,item:Ta,title:Ia,avatar:Ra,avatarUrl:Ma,desc:Wa,upload:Pa,signature:Ya};const ja=()=>{const a=K(),[c,i]=s.exports.useState({}),[u,o]=s.exports.useState(""),[n,_]=s.exports.useState(""),l=localStorage.getItem("token");s.exports.useEffect(()=>{f()},[]);const f=async()=>{const{data:d}=await q("/api/user/get_userinfo");i(d),o(Fe(d.avatar)),_(d.signature)},m=d=>{if(d&&d.file.size>200*1024){F.show("\u4E0A\u4F20\u5934\u50CF\u4E0D\u5F97\u8D85\u8FC7 200 KB\uFF01\uFF01");return}let y=new FormData;y.append("file",d.file),R({method:"post",url:`${ve}/upload`,data:y,headers:{"Content-Type":"multipart/form-data",Authorization:l}}).then(N=>{o(Fe(N.data))})},v=async()=>{await O("/api/user/edit_userinfo",{signature:n,avatar:u}),F.show("\u4FEE\u6539\u6210\u529F"),a(-1)};return t(J,{children:[e(ae,{title:"\u7528\u6237\u4FE1\u606F"}),t("div",{className:T.userinfo,children:[e("h1",{children:"\u4E2A\u4EBA\u8D44\u6599"}),t("div",{className:T.item,children:[e("div",{className:T.title,children:"\u5934\u50CF"}),t("div",{className:T.avatar,children:[e("img",{className:T.avatarUrl,src:u,alt:""}),t("div",{className:T.desc,children:[e("span",{children:"\u652F\u6301 jpg\u3001png\u3001jpeg \u683C\u5F0F\u5927\u5C0F 200KB \u4EE5\u5185\u7684\u56FE\u7247"}),e(Me,{className:T.filePicker,onChange:m,accept:"image/*",children:e(ee,{className:T.upload,theme:"primary",size:"xs",children:"\u70B9\u51FB\u4E0A\u4F20"})})]})]})]}),t("div",{className:T.item,children:[e("div",{className:T.title,children:"\u4E2A\u6027\u7B7E\u540D"}),e("div",{className:T.signature,children:e(M,{clearable:!0,type:"text",value:n,placeholder:"\u8BF7\u8F93\u5165\u4E2A\u6027\u7B7E\u540D",onChange:d=>_(d)})})]}),e(ee,{onClick:v,style:{marginTop:50},block:!0,theme:"primary",children:"\u4FDD\u5B58"})]})]})},za="_account_k3p1j_1",La="_form_k3p1j_4",Ua="_btn_k3p1j_9";var _e={account:za,form:La,btn:Ua};const qa=a=>{const{getFieldProps:c,getFieldError:i}=a.form,u=()=>{a.form.validateFields(async(o,n)=>{if(!o){if(console.log(n),n.newpass!=n.newpass2){F.show("\u65B0\u5BC6\u7801\u8F93\u5165\u4E0D\u4E00\u81F4");return}await O("/api/user/modify_pass",{old_password:n.oldpass,new_password:n.newpass,new_password2:n.newpass2}),F.show("\u4FEE\u6539\u6210\u529F")}})};return t(J,{children:[e(ae,{title:"\u91CD\u5236\u5BC6\u7801"}),t("div",{className:_e.account,children:[t("div",{className:_e.form,children:[e($,{title:"\u539F\u5BC6\u7801",children:e(M,G({clearable:!0,type:"text",placeholder:"\u8BF7\u8F93\u5165\u539F\u5BC6\u7801"},c("oldpass",{rules:[{required:!0}]})))}),e($,{title:"\u65B0\u5BC6\u7801",children:e(M,G({clearable:!0,type:"text",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},c("newpass",{rules:[{required:!0}]})))}),e($,{title:"\u786E\u8BA4\u5BC6\u7801",children:e(M,G({clearable:!0,type:"text",placeholder:"\u8BF7\u518D\u6B64\u8F93\u5165\u65B0\u5BC6\u7801\u786E\u8BA4"},c("newpass2",{rules:[{required:!0}]})))})]}),e(ee,{className:_e.btn,block:!0,theme:"primary",onClick:u,children:"\u63D0\u4EA4"})]})]})};var Oa=We()(qa);const Ha="_about_1urnl_1";var Ka={about:Ha};const Xa=()=>t(J,{children:[e(ae,{title:"\u5173\u4E8E"}),t("div",{className:Ka.about,children:[e("h2",{children:"\u5173\u4E8E\u9879\u76EE"}),e("article",{children:"\u5168\u6808\u5B66\u4E60\u9879\u76EE\u3002"}),e("article",{children:"\u6570\u636E\u5E93\u91C7\u7528mySQL\u3002"}),e("article",{children:"\u670D\u52A1\u7AEF\u91C7\u7528 Node \u67B6\u6784 Egg.js\u5B9E\u73B0CRUD\uFF1Begg-jwt\u5B9E\u73B0\u9274\u6743"}),e("article",{children:"\u524D\u7AEF\u91C7\u7528 React \u6846\u67B6\uFF08HOOKS\uFF09 + Zarm \u79FB\u52A8\u7AEF\u7EC4\u4EF6\u5E93 + vite\u5F00\u53D1\u6784\u5EFA\uFF1B\u4F7F\u7528pushstate-server + pm2\u8FD0\u884C\u4E8E\u670D\u52A1\u5668\u3002"}),e("h2",{children:"\u5173\u4E8E\u4F5C\u8005"}),e("article",{children:"have a try"})]})]}),Va=[{path:"/",component:Tt},{path:"/data",component:ea},{path:"/user",component:ca},{path:"/login",component:ha},{path:"/detail",component:Da},{path:"/account",component:Oa},{path:"/about",component:Xa},{path:"/userinfo",component:ja}];var Qa={};const Ce=({showNav:a})=>{const[c,i]=s.exports.useState("/"),u=K(),o=n=>{i(n),u(n)};return t(se,{visible:a,className:Qa.tab,activeKey:c,onChange:o,children:[e(se.Item,{itemKey:"/",title:"\u8D26\u5355",icon:e(E,{type:"zhangdan"})}),e(se.Item,{itemKey:"/data",title:"\u7EDF\u8BA1",icon:e(E,{type:"tongji"})}),e(se.Item,{itemKey:"/user",title:"\u6211\u7684",icon:e(E,{type:"wode"})})]})};Ce.propTypes={showNav:H.bool};function Za(){const a=ye(),{pathname:c}=a,i=["/","/data","/user"],[u,o]=s.exports.useState(!1);return s.exports.useEffect(()=>{o(i.includes(c))},[c]),t(J,{children:[e(Pe,{primaryColor:"#007fff",locale:Ye,children:e(je,{children:Va.map(n=>e(ze,{exact:!0,path:n.path,element:e(n.component,{})},n.path))})}),e(Ce,{showNav:u})]})}Le.render(e(Ue.StrictMode,{children:e(qe,{children:e(Za,{})})}),document.getElementById("root"));
